<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"
          name="viewport">
    <meta content="ie=edge" http-equiv="X-UA-Compatible">
    <link href="style.css" rel="stylesheet">
    <title>Document</title>
</head>
<body>
<div id="root"></div>

<script>
    let state = {
        time: new Date(),
        lots: [
            {
                id: 1,
                title: 'Apple',
                price: 16,
                description: 'Apple description'
            },
            {
                id: 2,
                title: 'Orange',
                price: 41,
                description: 'Orange description'
            }
        ]
    }

    // ===========================

    function App({state}) {
        const app = document.createElement('div')
        app.className = ('app')
        app.append(Header())
        app.append(Clock({time: state.time}))
        app.append(Lots({lots: state.lots}))

        return app
    }

    function Header() {
        const header = document.createElement('header')
        const title = document.createElement('h1')
        title.innerText = 'Title'

        header.append(title)
        header.append(Logo())

        return header
    }

    function Logo() {
        const image = document.createElement('img')
        image.src = 'react.png'
        image.alt = 'logo'

        return image
    }

    function Clock({time}) {
        const timer = document.createElement('div')
        timer.className = 'timer'
        const value = document.createElement('span')
        value.className = 'value'
        value.innerText = time.toLocaleTimeString()

        timer.append(value)

        const icon = document.createElement('span')
        if (time.getHours() > 7 && time.getHours() < 21) {
            icon.className = 'icon day'
        } else {
            icon.className = 'icon night'
        }

        timer.append(icon)

        return timer
    }

    function Lots({lots}) {
        const list = document.createElement('div')
        list.className = 'lots'

        lots.forEach(lot => {
            list.append(Lot({lot}))
        })

        return list
    }

    function Lot({lot}) {
        const node = document.createElement('section')
        node.className = 'lot'

        const lotTitle = document.createElement('h2')
        lotTitle.className = 'lot-title'

        const lotTitleName = document.createElement('span')
        lotTitleName.innerText = lot.title

        const lotTitlePrice = document.createElement('span')
        lotTitlePrice.innerText = lot.price

        lotTitle.append(lotTitleName, lotTitlePrice)

        const lotDescription = document.createElement('p')
        lotDescription.innerText = lot.description

        node.append(lotTitle, lotDescription)

        return node
    }

    // ===========================

    function renderView(state) {
        render(App({state}), document.getElementById('root'))
    }

    renderView(state)

    // ===========================

    setInterval(() => {
        state = {
            ...state,
            time: new Date()
        }

        renderView(state)
    }, 1000)

    function render(newDom, mainDomRoot) {
        mainDomRoot.innerHTML = ''
        mainDomRoot.append(newDom)
    }

    // ===========================

</script>

</body>
</html>